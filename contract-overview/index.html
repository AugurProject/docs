<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<title data-react-helmet="true">Turbo Contract Overview | Augur Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.augur.net/contract-overview"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Turbo Contract Overview | Augur Docs"><meta data-react-helmet="true" name="description" content="Augur Turbo&#x27;s contracts are structured such that they are mostly independent."><meta data-react-helmet="true" property="og:description" content="Augur Turbo&#x27;s contracts are structured such that they are mostly independent."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.augur.net/contract-overview"><link data-react-helmet="true" rel="alternate" href="https://docs.augur.net/contract-overview" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.augur.net/contract-overview" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.7818fb39.css">
<link rel="preload" href="/assets/js/runtime~main.ed1b50f9.js" as="script">
<link rel="preload" href="/assets/js/main.537b06f5.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/augur-logo/Glyph/Color.svg" alt="Augur" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/img/augur-logo/Glyph/White.svg" alt="Augur" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Augur Docs</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Overview</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/v1">Augur V1</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/AugurProject/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">ðŸŒœ</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">ðŸŒž</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Augur</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/v1">Augur V1</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">turbo</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/contract-api">Contract API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/tasks">Hardhat Tasks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/turbo">Augur Turbo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/contract-overview">Turbo Contract Overview</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="theme-doc-markdown markdown"><header><h1>Turbo Contract Overview</h1></header><p>Augur Turbo&#x27;s contracts are structured such that they are mostly independent.
This makes it easy to upgrade smart contracts without special authority.</p><p>The major components are: MarketFactory, Fetcher, AMMFactory, MasterChef, and
FeePot. The contracts can be found at
<a href="https://github.com/AugurProject/turbo/tree/dev/packages/smart/contracts" target="_blank" rel="noopener noreferrer">https://github.com/AugurProject/turbo/tree/dev/packages/smart/contracts</a>.</p><p>Every type of market has its own MarketFactory. The market factory accepts USDC
and returns a &quot;complete set&quot;, which is one outcome token for each outcome.
The user will trade away the outcome tokens they don&#x27;t want, for those they do,
giving them a &quot;position&quot; that pays out a profit if they guess correctly.</p><p>Every market factory has the same common code for defining markets, minting
outcome tokens, and claiming winnings. These are defined in the contracts
&quot;AbstractMarketFactoryV*&quot;, with &quot;V3&quot; being the latest.</p><p>Each market factory additionally defines rules for market creation and market
resolution. Sports market factories encode some of the game rules, like
defining spread or specifying how to handle ties. The crypto market factory
pulls from the price feeds.</p><p>The market factories are mostly built out of other contracts, acting as mixins.
The design goal has been to move any common code into mixins. The market
factory contracts themselves hold a lot of boilerplate code used to invoke code
defined in mixins.</p><p>The market factories also define structs for additional information about
markets. For sports markets this is the &quot;Event&quot; struct, which ties together
several markets that are resolved by the same game scoring information. For
crypto this is the &quot;Coin&quot; struct, storing information like price feed address.</p><p>The sports supported right now are: NBA, NFL, MLB, and MMA/UFC. Other sports
can be added fairly easily using mixins, if they&#x27;re similar to other sports.</p><p>The crypto market factory deployed right now only supports price feeds. The
next version, which has been written, supports market cap as well. In actuality
the new version supports any Chainlink feeds.</p><p>There are some other market factories that aren&#x27;t supported for one reason or
another. Some are older versions that aren&#x27;t used anymore, like
SportsLinkMarketFactory. Others were made in expectation of being used but have
been indeterminately delayed or cancelled, like GroupedMarketFactory.</p><p>A market factory can contain virtually infinite markets. Iterating over all of
them to get the current state of markets isn&#x27;t always possible because many
nodes limit query runtime or response size. To work around this, we have the
Fetcher contracts.</p><p>Fetcher contracts return paginated lists of &quot;interesting&quot; markets. These are
markets that are either unresolved (open) or have unclaimed winning outcome
shares. There are two Fetcher contracts that matter right now: SportsFetcher
and CryptoFetcher.</p><p>This concludes the overview of the market factories. They&#x27;re all you need to
run Augur Turbo. However, in reality you want an easy way to trade, which can
be promoted through liquidity provision rewards.</p><p>Trading is enabled via BalancerV1 AMMs interacted with via the AMMFactory.
There need only be one AMMFactory for all market factories. It handles creating
AMMs, buying and selling outcome shares, and interacts with the MasterChef
contract to enable rewards.</p><p>The ability to set weights is necessary for adding liquidity to Augur Turbo
AMMs because of the way outcome tokens are created. Thus, we need to use
Balancer AMMs. The ability to use several outcomes is also helpful since
most markets have three outcomes due to the inclusion of the invalid outcome.</p><p>Why are weights needed? A naive AMM sets the price of tokens by their relative
balances in the AMM. This works reasonably well for normal tokens because
cheaper tokens are actually easier to acquire in larger quantities. This is not
true of outcome tokens because they are minted in equal quantities.</p><p>If you have a 50:50 market then a complete set of outcome tokens can be added
to the AMM&#x27;s liquidity pool without any tokens being kept by the LP. But if the
price isn&#x27;t exactly 50:50 then some tokens will be kept by the user lest they
move the price towards 50:50.</p><p>Normal outcome prices don&#x27;t differ enough to matter much up until the outcome
is known, which causes the price to rapidly approach 100:0. But the invalid
outcome (usually labeled &quot;No Contest&quot;) is uncommon so it&#x27;s set to 2%, the
smallest default ratio using BalancerV1. To provide the same amount of
liquidity for a 98:2 AMM is many times more than needed for a 50:50 market.
That inefficiency is extremely undesirable since it locks up so much capital
as well as giving the LP a larger position than they may desire.</p><p>The initial weights the AMMs use are set at market creation using the lines
from the sportsbook. They do not update as the sportsbook lines change.</p><p>Note that crypto markets do not have an invalid outcome and always start at a
price ratio of 50:50, but still use BalancerV1 AMMs. There&#x27;s no deep reason:
it&#x27;s easy to use the existing infrastructure needed for the sports markets.</p><p>TODO rewards</p><p>This concludes the overview of trading and rewards. Finally, there&#x27;s the FeePot
contract.</p><p>We don&#x27;t use it right now. It&#x27;s designed to pay REPv2 holders for providing a
secure backstop in case of bad market resolution. That functionality hasn&#x27;t
been implemented yet so the fee that would go to the FeePot is set to zero.</p><p>So long as AugurV2 (on Ethereum mainnet) never forks, there will only ever need
to be one FeePot contract. If it works then a new FeePot must be deployed.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/AugurProject/docs/edit/main/website/docs/turbo/turbo.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/turbo"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Augur Turbo</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Augur Project. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ed1b50f9.js"></script>
<script src="/assets/js/main.537b06f5.js"></script>
</body>
</html>