---
title: Contract API
slug: /contract-api
---

# Augur Turbo - Contract API

Augur Turbo has a relatively simple contract design, consisting of three major components.

- Market Factories
- AMM Factories
- FeePot

In the current system there is very little trust of any of these contracts.

A market factory is a contract interface that Chainlink nodes can use to put market data on chain and update it upon resolution. For each of these markets, a user will interact with an AMMFactory to create an AMM associated with that market. In the current implementation this AMM is a simple Balancer v1 pool.

The FeePot is a contract which will be used in the future to handle REPv2 staking for claiming a portion of fees generated by trading in the system.

## Actors
There are four main Actors in the system.
1. Liquidity Providers (LPs)
2. Traders
3. Chainlink Nodes
4. UIs / Data Clients

Each API is associated with one or more of these actors.

## Index

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Actor</th>
<th scope="col" class="org-left">Action</th>
<th scope="col" class="org-left">Contract</th>
<th scope="col" class="org-left">Method</th>
<th scope="col" class="org-left">Approvals</th>
<th scope="col" class="org-left">Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td class="org-left">LP</td>
<td class="org-left">add initial liquidity</td>
<td class="org-left">AMMFactory</td>
<td class="org-left">createPool</td>
<td class="org-left">collateral</td>
<td class="org-left">&#xa0;</td>
</tr>


<tr>
<td class="org-left">LP</td>
<td class="org-left">add subsequent liquidity</td>
<td class="org-left">AMMFactory</td>
<td class="org-left">addLiquidity</td>
<td class="org-left">collateral</td>
<td class="org-left">&#xa0;</td>
</tr>


<tr>
<td class="org-left">LP</td>
<td class="org-left">remove liquidity</td>
<td class="org-left">AMMFactory</td>
<td class="org-left">removeLiquidity</td>
<td class="org-left">lp token</td>
<td class="org-left">each market has its own lp token</td>
</tr>


<tr>
<td class="org-left">LP, trader</td>
<td class="org-left">trade winning shares for collateral</td>
<td class="org-left">SportsLinkMarketFactory</td>
<td class="org-left">claimWinnings, claimManyWinnings</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>


<tr>
<td class="org-left">trader</td>
<td class="org-left">trade collateral for shares</td>
<td class="org-left">AMMFactory</td>
<td class="org-left">buy</td>
<td class="org-left">collateral</td>
<td class="org-left">&#xa0;</td>
</tr>


<tr>
<td class="org-left">trader</td>
<td class="org-left">trade shares for collateral</td>
<td class="org-left">AMMFactory</td>
<td class="org-left">sellForCollateral</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">share tokens trust AMMFactory so no approval needed</td>
</tr>


<tr>
<td class="org-left">link node</td>
<td class="org-left">create market</td>
<td class="org-left">SportsLinkMarketFactory</td>
<td class="org-left">createMarket</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">link node only. use encodeCreation to build the argument. creates 3 markets off of the event</td>
</tr>


<tr>
<td class="org-left">link node</td>
<td class="org-left">resolve market</td>
<td class="org-left">SportsLinkMarketFactory</td>
<td class="org-left">trustedResolveMarkets</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">link node only. use encodeResolutin to build the argument. resolves all 3 markets for the event</td>
</tr>


<tr>
<td class="org-left">link node</td>
<td class="org-left">claim settlement fees</td>
<td class="org-left">SportsLinkMarketFactory</td>
<td class="org-left">claimSettlementFees</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">link node only</td>
</tr>


<tr>
<td class="org-left">UI</td>
<td class="org-left">get share prices</td>
<td class="org-left">AMMFactory</td>
<td class="org-left">tokenRatios</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">one of each share equals one collateral, adjusted by shareFactor</td>
</tr>


<tr>
<td class="org-left">UI</td>
<td class="org-left">get pool liquidity</td>
<td class="org-left">AMMFactory</td>
<td class="org-left">getPoolBalances and getPoolWeights</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">one of each share equals one collateral, adjusted by shareFactor</td>
</tr>


<tr>
<td class="org-left">UI</td>
<td class="org-left">get trading fee</td>
<td class="org-left">AMMFactory</td>
<td class="org-left">getSwapFee</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>


<tr>
<td class="org-left">UI</td>
<td class="org-left">get someone's token balance</td>
<td class="org-left">AMMFactory</td>
<td class="org-left">getPoolTokenBalance</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">works well with multicall</td>
</tr>


<tr>
<td class="org-left">UI</td>
<td class="org-left">get pool associated with market</td>
<td class="org-left">AMMFactory</td>
<td class="org-left">getPool</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>


<tr>
<td class="org-left">UI</td>
<td class="org-left">get basic market info</td>
<td class="org-left">SportsLinkMarketFactory</td>
<td class="org-left">getMarket</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>


<tr>
<td class="org-left">UI</td>
<td class="org-left">get market info for SportsLink</td>
<td class="org-left">SportsLinkMarketFactory</td>
<td class="org-left">getMarketDetails</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>


<tr>
<td class="org-left">UI</td>
<td class="org-left">get quantity of markets</td>
<td class="org-left">SportsLinkMarketFactory</td>
<td class="org-left">marketCount</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">market ids increment from 1 so this implies the list of all markets</td>
</tr>


<tr>
<td class="org-left">AMMFactory</td>
<td class="org-left">turn collateral into n of each share</td>
<td class="org-left">SportsLinkMarketFactory</td>
<td class="org-left">mintShares</td>
<td class="org-left">collateral</td>
<td class="org-left">AMMFactory uses this for more liquidity-efficient buys</td>
</tr>


<tr>
<td class="org-left">AMMFactory</td>
<td class="org-left">turn n of each share into collateral</td>
<td class="org-left">SportsLinkMarketFactory</td>
<td class="org-left">burnShares</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">AMMFactory uses this for more liquidity-efficient sells</td>
</tr>


<tr>
<td class="org-left">link node</td>
<td class="org-left">check if market is resolved</td>
<td class="org-left">SportsLinkMarketFactory</td>
<td class="org-left">isMarketResolved</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">&#xa0;</td>
</tr>


<tr>
<td class="org-left">link node</td>
<td class="org-left">list all unresolved markets</td>
<td class="org-left">SportsLinkMarketFactory</td>
<td class="org-left">listUnresolvedMarkets</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">unusable on-chain due to O(n) gas cost</td>
</tr>


<tr>
<td class="org-left">nobody</td>
<td class="org-left">get conversion rate from shares to collateral</td>
<td class="org-left">SportsLinkMarketFactory</td>
<td class="org-left">calcCost</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">does the shareFactor adjustment for shares and collateral. dies if there's a remainder</td>
</tr>


<tr>
<td class="org-left">nobody</td>
<td class="org-left">get conversion rate from collateral to shares</td>
<td class="org-left">SportsLinkMarketFactory</td>
<td class="org-left">calcShares</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">reverse of calcCost</td>
</tr>


<tr>
<td class="org-left">link node</td>
<td class="org-left">get markets associated with event</td>
<td class="org-left">SportsLinkMarketFactory</td>
<td class="org-left">getEventMarkets</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">list of 3 market IDS. zero means the market wasn't created</td>
</tr>


<tr>
<td class="org-left">link node</td>
<td class="org-left">check if event was already registered</td>
<td class="org-left">SportsLinkMarketFactory</td>
<td class="org-left">isEventRegistered</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">return true only if all markets were created - often the first (head2head) is created alone</td>
</tr>


<tr>
<td class="org-left">link node</td>
<td class="org-left">pack market creation args into a bytes32</td>
<td class="org-left">SportsLinkMarketFactory</td>
<td class="org-left">encodeCreation</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">use with createMarket</td>
</tr>


<tr>
<td class="org-left">nobody</td>
<td class="org-left">unpack market creation args from bytes32</td>
<td class="org-left">SportsLinkMarketFactory</td>
<td class="org-left">decodeCreation</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">used internally</td>
</tr>


<tr>
<td class="org-left">link node</td>
<td class="org-left">pack market resolution args into a bytes32</td>
<td class="org-left">SportsLinkMarketFactory</td>
<td class="org-left">encodeResolution</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">use with trustedResolveMarkets</td>
</tr>


<tr>
<td class="org-left">nobody</td>
<td class="org-left">unpack market resolution args from a bytes32</td>
<td class="org-left">SportsLinkMarketFactory</td>
<td class="org-left">decodeResolution</td>
<td class="org-left">&#xa0;</td>
<td class="org-left">used internally</td>
</tr>
</tbody>
</table>
